<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta name="color-scheme" content="light dark" />
    <title>SPARQL 1.2 Query Results JSON Format</title>

    <script src="https://www.w3.org/Tools/respec/respec-w3c" class="remove"></script>
    <script src="./common/local-biblio.js" class="remove"></script>
    <script src="./common/fixup.js" class="remove"></script>

    <script class="remove">
      // All config options at https://respec.org/docs/
      var respecConfig = {
        group:                "rdf-star" ,
        localBiblio:          localBibliography,
        specStatus:           "ED",
        edDraftURI:           "https://w3c.github.io/sparql-results-json/spec/",
        testSuiteURI:         "https://w3c.github.io/rdf-tests/",
        shortName:            "sparql12-results-json",
        copyrightStart:       "2012",
         
        github:               "https://github.com/w3c/sparql-results-json",
        wgPublicList:         "public-rdf-star-wg",

//        implementationReportURI: "https://w3c.github.io/sparql12-results-json/reports/",
//        errata:               "https://w3c.github.io/sparql12-results-json/errata/",

        previousPublishDate:  "2013-03-21",
        prevRecURI:           "https://www.w3.org/TR/2013/REC-sparql11-results-json-20130321",
        prevRecShortname:     "sparql11-results-json",
        previousMaturity:     "REC",
        
        editors: [
          { name: "Andy Seaborne", w3cid: "29909"},
          { name: "Ruben Taelman", w3cid: "84199"},
          { name: "Gregory Williams", w3cid: "38870"},
          { name: "Thomas Pellissier Tanon", w3cid: "73758"},
        ],
        formerEditors: [
          { name: "Andy Seaborne" },
          { name: "Kendall Grant Clark" },
          { name: "Lee Feigenbaum" },
          { name: "Elias Torres" },
        ],

        //doJsonLd:     true
      };
    </script>

    <style>
      table.result {
        border-collapse: collapse;
      }

      .result th , .result td {
        border: 1px solid;
        padding-inline: 0.5em;
      }
    </style>
  </head>
  <body>
    <section id="abstract">
      <h2>Abstract</h2>
<p><a data-cite="SPARQL12-CONCEPTS#">SPARQL</a> is a set of standards for the query and update of RDF data, along with ways to access such data over the web. This document describes
    the representation of SELECT and ASK query results using <a data-cite="rfc4627#">JSON</a>.</p>
    </section>

    <section id="sotd" class="introductory updateable-rec">
      <p>
        This specification is published by the
        <a href="https://www.w3.org/groups/wg/rdf-star">RDF Star Working Group</a> as part of the
        update of specifications for format and errata.
      </p>

      <section id="related" data-include="common/sparql-related.html"></section>
    </section>

<!-- BODY -->
    <section id="introduction">
      <h2>Introduction</h2>
      <p>This document describes how to serialize SPARQL results (SELECT and ASK query forms) in a <a data-cite="rfc4627#">JSON</a> format. The format is designed to be a
      complete representation of the information in the query results. The results of a SELECT query are serilialized as an array, where each array element is one "row" of the query results; the
      results of an ASK query give the boolean value of the query result.</p>
      <p>An Internet Media Type is provided for <code>application/sparql-results+json</code>.</p>
      <p>There is also a [[[SPARQL12-RESULTS-XML]]] which follows a similar design pattern but uses XML as the
      serialization.</p>
      <p>Unless otherwise noted in the section heading, all sections and appendices in this document are normative.</p>
    </section>
    <section id="json-result-object">
      <h2>JSON Results Object</h2>
      <p>The results of a SPARQL Query are serialized in JSON as a single top-level JSON object. This object has a <code>"head"</code> member and either a <code>"results"</code> member or a
      <code>"boolean"</code> member, depending on the query form.</p>
      <p>This example shows the results of a <code>SELECT</code> query. The query solutions are represented in an array which is the value of the <code>"bindings"</code> key, in turn part of an
      object that is the value of the <code>"results"</code> key:</p>
      <pre class="json">{
  "head": { "vars": [ "book" , "title" ]
  } ,
  "results": { 
    "bindings": [
      {
        "book": { "type": "uri" , "value": "http://example.org/book/book6" } ,
        "title": { "type": "literal" , "value": "Harry Potter and the Half-Blood Prince" }
      } ,
      {
        "book": { "type": "uri" , "value": "http://example.org/book/book7" } ,
        "title": { "type": "literal" , "value": "Harry Potter and the Deathly Hallows" }
      } ,
      {
        "book": { "type": "uri" , "value": "http://example.org/book/book5" } ,
        "title": { "type": "literal" , "value": "Harry Potter and the Order of the Phoenix" }
      } ,
      {
        "book": { "type": "uri" , "value": "http://example.org/book/book4" } ,
        "title": { "type": "literal" , "value": "Harry Potter and the Goblet of Fire" }
      } ,
      {
        "book": { "type": "uri" , "value": "http://example.org/book/book2" } ,
        "title": { "type": "literal" , "value": "Harry Potter and the Chamber of Secrets" }
      } ,
      {
        "book": { "type": "uri" , "value": "http://example.org/book/book3" } ,
        "title": { "type": "literal" , "value": "Harry Potter and the Prisoner Of Azkaban" }
      } ,
      {
        "book": { "type": "uri" , "value": "http://example.org/book/book1" } ,
        "title": { "type": "literal" , "value": "Harry Potter and the Philosopher's Stone" }
      }
    ]
  }
}</pre>
      <p>This example shows the result from an <code>ASK</code> query:</p>
      <pre class="json">{
  "head" : { } ,
  "boolean" : true
}</pre>
      <p>Other keys, with different names, may be present in the JSON Results Object but are not defined by this specification.</p>
    </section>
    <section id="select-results-form">
      <h2>Variable Binding Results</h2>
      <p>The results of a SPARQL <code>SELECT</code> query are serialized as an array of bindings of variables. The value of the <code>"head"</code> key is an array of all variables projected in the
      query's <code>SELECT</code> clause.</p>
      <section id="select-head">
        <h3>"head"</h3>
        <p>The <code>"head"</code> member gives the variables mentioned in the results and may contain a <code>"link"</code> member.</p>
        <pre class="json">{
"head" { 
   "vars" : [ ... ] ,
   "link" : [ ... ] }</pre>
        <section id="select-vars">
          <h4>"vars"</h4>
          <p>The <code>"vars"</code> member is an array giving the names of the variables used in the results. These are the projected variables from the query. A variable is not necessarily given a
          value in every query solution of the results.</p>
          <pre class="json">"vars" : [ "book" , "title" ] </pre>
          <p>The order of variable names should correspond to the variables in the SELECT clause of the query, unless the query is of the form <code>SELECT *</code> in which case order is not
          significant.</p>
        </section>
        <section id="select-link">
          <h4>"link"</h4>
          <p>The optional <code>"link"</code> member gives an array of URIs, as strings, to refer for further information. The format and content of these link references is not defined by this
          document.</p>
          <pre class="json">"link" : [ "http://example/dataset/metadata.ttl" ] </pre>
        </section>
      </section>
      <section id="select-results">
        <h3>"results"</h3>
        <p>The value of the <code>"results"</code> member is an object with a single key, <code>"bindings"</code>.</p>
        <section id="select-bindings">
          <h4>"bindings"</h4>
          <p>The value of the <code>"bindings"</code> member is an array with zero or more elements, one element per query solution. Each query solution is a JSON object. Each key of this object is a
          variable name from the query solution. The value for a given variable name is a JSON object that <a href="#select-encode-terms">encodes the variable's bound value, an RDF term.</a> There
          are zero elements in the array if the query returned an empty solution sequence. Variables names do not include the initial "?" or "$" character. Each variable name that appears as a key
          within the <code>"bindings"</code> array will have appeared in the <a href="#select-vars"><code>"vars"</code></a> array in the results header.</p>
          <p>A variable does not appear in an array element if it is not bound in that particular query solution.</p>
          <p>The order of elements in the bindings array reflects the order, if any, of the query solution sequence.</p>
          <pre class="json">"bindings" : [
  {
    "a" : { ... } ,
    "b" : { ... } 
  } ,
  {
    "a" : { ... } ,
    "b" : { ... } 
  }
]</pre>
          <p>If the query returns no solutions, an empty array is used.</p>
          <pre class="json">"bindings" : []</pre>
        </section>
        <section id="select-encode-terms">
          <h4>Encoding RDF terms</h4>
          <p>An RDF term (IRI, literal, blank node, or triple term) is encoded as a JSON object. All aspects of the RDF term are represented. The JSON object has a <code>"type"</code> member and other members
          depending on the specific kind of RDF term.</p>
          <table class="result">
            <tbody>
              <tr>
                <th>RDF Term</th>
                <th>JSON form</th>
              </tr>
              <tr>
                <td>IRI <em><b>I</b></em></td>
                <td><code>{"type": "uri", "value": "<em><b>I</b></em>"}</code></td>
              </tr>
              <tr>
                <td>Literal <em><b>S</b></em></td>
                <td><code>{"type": "literal","value": "<em><b>S</b></em>"}</code></td>
              </tr>
              <tr>
                <td>Literal <em><b>S</b></em> with language tag <em><b>L</b></em> without base direction</td>
                <td><code>{ "type": "literal", "value": "<em><b>S</b></em>", "xml:lang": "<em><b>L</b></em>"}</code></td>
              </tr>
              <tr>
                <td>Literal <em><b>S</b></em> with language tag <em><b>L</b></em> with base direction <em><b>L</b></em></td>
                <td><code>{ "type": "literal", "value": "<em><b>S</b></em>", "xml:lang": "<em><b>L</b></em>", "its:dir": "<em><b>B</b></em>"}</code></td>
              </tr>
              <tr>
                <td>Literal <em><b>S</b></em> with datatype IRI <em><b>D</b></em></td>
                <td><code>{ "type": "literal", "value": "<em><b>S</b></em>", "datatype": "<em><b>D</b></em>"}</code></td>
              </tr>
              <tr>
                <td>Blank node, label <em><b>B</b></em></td>
                <td><code>{"type": "bnode", "value": "<em><b>B</b></em>"}</code></td>
              </tr>
              <tr>
                <td>Triple term, with subject <em><b>S</b></em>, predicate <em><b>P</b></em>, and object <em><b>O</b></em></td>
                <td><code>{"type": "triple", "value": {"subject": "<em><b>S</b></em>", "predicate": "<em><b>P</b></em>", "object": "<em><b>O</b></em>"}}</code></td>
              </tr>
            </tbody>
          </table>
          <p>The blank node label is scoped to the results object. That is, two blank nodes with the same label in a single SPARQL Results JSON object are the same blank node. This is not an
          indication of any internal system identifier the SPARQL processor may use. Use of the same label in another SPARQL Results JSON object does not imply it is the same blank node.</p>
          <p>The subject, predicate, and object of a triple term are encoded using the same format, recursively.</p>
          <p class="note">The <code>xml:lang</code> and <code>its:dir</code> keys resemble terms in XML namespaces due to alignment with the [[[SPARQL12-RESULTS-XML]]] specification, but such namespaces do not exist in JSON, which means that these keys are to be used "as is".</p>
        </section>
      </section>
    </section>
    <section id="ask-result-form">
      <h2>Boolean Results</h2>
      <p>The results of a SPARQL <code>ASK</code> query are serialized as a boolean value, giving the result of the query evaluation.</p>
      <section id="ask-head">
        <h3>"head"</h3>
        <section id="ask-link">
          <h4>"link"</h4>
          <p>The <code>"link"</code> member has the same format as the <a href="#select-link">SELECT <code>"link"</code></a> member.</p>
        </section>
      </section>
      <section id="ask-boolean">
        <h3>"boolean"</h3>
        <p>The result of an <code>ASK</code> query form are encoded by the <code>"boolean"</code> member, which takes either the JSON value <code>true</code> or the JSON value <code>false</code>.</p>
        <pre class="json">"boolean" : true </pre>
      </section>
    </section>
    <section id="example">
      <h2>Examples</h2>
      <p>This section is not normative.</p>
      <section id="example-bindings">
        <h2>Variable Binding Results Examples</h2>
        <p>The following JSON is a serialization of the XML document <a href="https://www.w3.org/2009/sparql/xml-results/output.srx">output.srx</a>:</p>
        <pre class="json">

{
  "head": {
    "link": [ "http://www.w3.org/TR/rdf-sparql-XMLres/example.rq" ],
    "vars": [
      "x",
      "hpage",
      "name",
      "mbox",
      "age",
      "blurb",
      "friend"
    ]
  },
  "results": {
    "bindings": [
      {
        "x":     { "type": "bnode",   "value": "r1" },
        "hpage": { "type": "uri",     "value": "http://work.example.org/alice/" },
        "name":  { "type": "literal", "value": "Alice" },
        "mbox":  { "type": "literal", "value": "" },
        "blurb": {
          "datatype": "http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral",
          "type": "literal",
          "value": "&lt;p xmlns=\"http://www.w3.org/1999/xhtml\"&gt;My name is &lt;b&gt;alice&lt;/b&gt;&lt;/p&gt;"
        },
        "friend": { "type": "bnode", "value": "r2" }
      },
      {
        "x":      { "type": "bnode",   "value": "r2" },
        "hpage":  { "type": "uri",     "value": "http://work.example.org/bob/" },
        "name":   { "type": "literal", "value": "Bob", "xml:lang": "en" },
        "mbox":   { "type": "uri",     "value": "mailto:bob@work.example.org" },
        "friend": { "type": "bnode",   "value": "r1" }
      }
    ]
  }
}
</pre>
      </section>
      <section id="example-bindings-triple-term">
        <h2>Variable Binding Results Examples with Triple Terms</h2>
        <p>The following JSON is a serialization of the XML document <a href="https://www.w3.org/TR/sparql12-results-xml/output-triple-terms.srx">output-triple-terms.srx</a> that contains triple terms:</p>
        <pre class="json">{
  "head": {
    "link": [ "http://www.w3.org/TR/rdf-sparql-XMLres/example-triple-terms.rq" ],
    "vars": [
      "x",
      "name",
      "triple"
    ]
  },
  "results": {
    "bindings": [
      {
        "x":    { "type": "bnode",   "value": "r1" },
        "name": { "type": "literal", "value": "Alice" },
        "triple": {
          "type": "triple",
          "value": {
            "subject":   { "type": "uri",     "value": "http://example.org/alice" },
            "predicate": { "type": "uri",     "value": "http://example.org/name" },
            "object":    { "type": "literal", "value": "Alice", "datatype": "http://www.w3.org/2001/XMLSchema#string" }
          }
        }
      },
      {
        "x":    { "type": "bnode",   "value": "r2" },
        "name": { "type": "literal", "value": "Bob", "xml:lang": "en" },
        "triple": {
          "type": "triple",
          "value": {
            "subject":   { "type": "uri",     "value": "http://example.org/bob" },
            "predicate": { "type": "uri",     "value": "http://example.org/name" },
            "object":    { "type": "literal", "value": "Bob", "datatype": "http://www.w3.org/2001/XMLSchema#string" }
          }
        }
      }
    ]
  }
}</pre>
      </section>
    </section>
    <section id="media-type"><div id="mime"></div>
      <h2>Internet Media Type, File Extension and Macintosh File Type</h2>
      <p>The Internet Media Type (formerly known as MIME Type) for the SPARQL Query Results JSON Format is "application/sparql-results+json".</p>
      <p>It is recommended that SPARQL Query Results JSON Format files have the extension ".srj" (all lowercase) on all platforms.</p>
      <p>It is recommended that SPARQL Query Results JSON Format files stored on Macintosh HFS file systems be given a file type of "TEXT".</p>
      <p>This information that follows is intended to be submitted to the IESG for review, approval, and registration with IANA.</p>
      <dl>
        <dt>Type name:</dt>
        <dd>application</dd>
        <dt>Subtype name:</dt>
        <dd>sparql-results+json</dd>
        <dt>Required parameters:</dt>
        <dd>None</dd>
        <dt>Optional parameters:</dt>
        <dd>None</dd>
        <dt>Encoding considerations:</dt>
        <dd>The encoding considerations of the SPARQL Query Results JSON Format is identical to those of the "application/json" as specified in [[RFC4627]].</dd>
        <dt>Security considerations:</dt>
        <dd>SPARQL query results uses URIs. See Section 7 of [[RFC3986]].<br>
        SPARQL query results uses IRIs. See Section 8 of [[RFC3987]].<br>
        The security considerations of the SPARQL Query Results JSON Format is identical to those of the "application/json" as specified in [[RFC4627]].</dd>
        <dt>Interoperability considerations:</dt>
        <dd>There are no known interoperability issues.</dd>
        <dt>Published specification:</dt>
        <dd>http://www.w3.org/TR/sparql11-results-json/</dd>
        <dt>Applications which use this media type:</dt>
        <dd>No known applications currently use this media type.</dd>
        <dt>Additional information:</dt>
        <dt>Magic number(s):</dt>
        <dd>n/a</dd>
        <dt>File extension(s):</dt>
        <dd>".srj"</dd>
        <dt>Macintosh file type code(s):</dt>
        <dd>"TEXT"</dd>
        <dt>Person &amp; email address to contact for further information:</dt>
        <dd>Andy Seaborne &lt;public-rdf-dawg-comments@w3.org&gt;</dd>
        <dt>Intended usage:</dt>
        <dd>COMMON</dd>
        <dt>Restrictions on usage:</dt>
        <dd>None</dd>
        <dt>Author/Change controller:</dt>
        <dd>The SPARQL specification is a work product of the World Wide Web Consortium's SPARQL Working Group. The W3C has change control over these specifications.</dd>
      </dl>
    </section>
    
    <section id="changes-1-1" class="appendix informative">
      <h2>Changes between SPARQL 1.1 Query Results JSON Format and SPARQL 1.2 Query Results JSON Format</h2>
      <ul>
        <li>Fix link to incorrect srx file in <a href="#example" class="sectionRef"></a></li>
        <li>Add JSON Schema file for SPARQL Query Results JSON</li>
        <li>Use Media Type instead of MIME Type in <a href="#media-type" class="sectionRef"></a></li>
        <li>Allow triple terms to be expressed in <a href="#select-encode-terms" class="sectionRef"></a></li>
        <li>Support directional language-tagged strings in <a href="#select-encode-terms" class="sectionRef"></a></li>
      </ul>
    </section>
    
<!-- BODY -->
    <section id="privacy">
      <h2>Privacy Considerations</h2>
      <p>TODO</p>
    </section>

    <section id="security">
      <h2>Security Considerations</h2>
      <p>TODO</p>
    </section>

    <section id="internationalization">
      <h2>Internationalization Considerations</h2>
      <p>TODO</p>                
    </section>

    <section id="index"></section>

  </body>
</html>
